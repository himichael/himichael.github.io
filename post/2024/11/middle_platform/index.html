<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="referrer" content="no-referrer-when-downgrade">
    

    <title>数据中台总结 | 记录每个瞬间</title>
    <meta property="og:title" content="数据中台总结 - 记录每个瞬间">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2024-10-30T09:08:07&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2024-10-30T09:08:07&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="数据中台总结">
        <meta name="author" content="隔壁老王">
        
    <meta property="og:url" content="https://code0xff.org/post/2024/11/middle_platform/">
    <link rel="shortcut icon" href='/favicon.ico'  type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
        <link href="https://cdn.bootcdn.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" rel="stylesheet">
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://code0xff.org/">
                        记录每个瞬间
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://code0xff.org/">首页</a>
                    
                    <a  href="https://code0xff.org/linked/" title="链接">链接</a>
                    
                    <a  href="https://code0xff.org/archives/" title="归档">归档</a>
                    
                    <a  href="https://code0xff.org/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">数据中台总结</h1>
        </header>
        <date class="post-meta meta-date">
            2024年10月30日
        </date>
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#原理">原理</a>
          <ul>
            <li><a href="#基础">基础</a></li>
            <li><a href="#方法论组织和技术">方法论、组织和技术</a></li>
          </ul>
        </li>
        <li><a href="#实现">实现</a>
          <ul>
            <li><a href="#元数据中心">元数据中心</a></li>
            <li><a href="#数据指标">数据指标</a></li>
            <li><a href="#数据模型复用">数据模型复用</a></li>
            <li><a href="#数据质量">数据质量</a></li>
            <li><a href="#成本治理">成本治理</a></li>
            <li><a href="#数据服务">数据服务</a></li>
            <li><a href="#数据安全">数据安全</a></li>
          </ul>
        </li>
        <li><a href="#实践">实践</a>
          <ul>
            <li><a href="#构建企业应用">构建企业应用</a></li>
            <li><a href="#数据研发流程">数据研发流程</a></li>
            <li><a href="#中台建设">中台建设</a></li>
          </ul>
        </li>
        <li><a href="#参考">参考</a></li>
      </ul>
    </li>
  </ul>
</nav>
        
        <div class="post-meta">
            
            <span class="post-meta meta-tags">
                <ul class="clearfix">
                    <a href='/categories/%E6%9E%B6%E6%9E%84'>架构</a>
                </ul>
            </span>
            
        </div>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            <h2 id="原理">原理</h2>
<h3 id="基础">基础</h3>
<p>几个时代</p>
<ul>
<li>数据仓库</li>
<li>大数据出现</li>
<li>大数据平台</li>
<li>数据中台

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/10/31/75oiTH.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/10/31/75oiTH.png" />
        </a>
    </li>
</ul>
<p>数仓建模</p>
<ul>
<li>恩门提出的建模方法自顶向下
<ul>
<li>这里的顶是指数据的来源，在传统数据仓库中，就是各个业务数据库</li>
<li>基于业务中各个实体以及实体之间的关系，构建数据仓库</li>
</ul>
</li>
<li>金博尔建模，是一种自底向上的模型设计方法
<ul>
<li>从数据分析的需求出发，拆分维度和事实</li>
<li>那么用户、商品就是维度，库存、用户账户余额是事实</li>
</ul>
</li>
<li>恩门建模因为是从数据源开始构建，构建成本比较高，适用于应用场景比较固定的业务，比如金融领域，冗余数据少是它的优势</li>
<li>金博尔建模由于是从分析场景出发，适用于变化速度比较快的业务，比如互联网业务</li>
</ul>
<p>数据湖的概念</p>
<ul>
<li>数据湖（Data Lake）是一个以原始格式存储数据的存储库或系统</li>
</ul>
<p>大数据平台</p>
<ul>
<li>大数据平台是面向数据研发场景的，覆盖数据研发的完整链路的数据工作台</li>
</ul>
<p>大数据平台分类</p>
<ul>
<li>数据集成</li>
<li>数据开发</li>
<li>数据测试</li>
<li>任务运维</li>
<li>磁层是 Hadoop为代表的基础设施

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/10/31/75osgZ.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/10/31/75osgZ.png" />
        </a>
    </li>
</ul>
<p>大数据平台的问题<br>
1、指标口径不一致</p>
<ul>
<li>业务口径不一致、计算逻辑不一致、数据来源不一致</li>
<li>要实现一致，就务必确保对同一个指标，只有一个业务口径，只加工一次，数据来源必须相同</li>
</ul>
<p>2、数据重复建设，需求响应时间长</p>
<ul>
<li>烟囱式的开发模式，导致了大量重复逻辑代码的研发</li>
<li>要解决数据需求响应慢，就必须解决数据复用的问题，要确保相同数据只加工一次，实现数据的共享</li>
</ul>
<p>3、取数效率低</p>
<ul>
<li>必须要构建一个全局的企业数据资产目录，实现数据地图的功能，快速找到数据</li>
</ul>
<p>4、数据质量差</p>
<ul>
<li>要解决数据质量差，就要及时发现然后快速恢复数据问题</li>
</ul>
<p>5、数据成本线性增长</p>
<ul>
<li>本质上跟重复建设有关</li>
</ul>
<p>数据中台</p>
<ul>
<li>大数据平台问题：重复开发的需求，导致数据割裂</li>
<li>数据中台的核心，是避免数据的重复计算，通过数据服务化，提高数据的共享能力，赋能数据应用</li>
<li>数据中台是企业构建的标准的、安全的、统一的、共享的数据组织，通过数据服务化的方式支撑前端数据应用</li>
<li>数据中台通过服务化的方式，提高了数据应用接入和管理的效率</li>
<li>对于非技术人员，数据中台提供了可视化的取数平台</li>
<li>实现了全链路的数据质量稽核监控，对一个指标的产出上游链路中涉及的每个表，都实现了数据一致性、完整性、正确性和及时性的监控</li>
</ul>
<p>所有数据只加工一次</p>
<ul>
<li>对于数仓数据，我们要求相同粒度的度量或者指标只加工一次，构建全局一致的公共维表</li>
<li>一个是数仓设计中心，在模型设计阶段，强制相同聚合粒度的模型，度量不能重复</li>
<li>另外一个是数据地图，方便数据开发能够快速地理解一张表的准确含义</li>
</ul>
<h3 id="方法论组织和技术">方法论、组织和技术</h3>
<p>如何去做才能实现数据只加工一次呢

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/10/31/75o2YU.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/10/31/75o2YU.png" />
        </a>
    </p>
<p>对表的命名进行规范化统一</p>
<ul>
<li>表的名称中最好能够携带表的主题域、业务过程、分层以及分区信息</li>
<li>对于仓储域下的一张入库明细表，如下：

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/10/31/75o6dq.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/10/31/75o6dq.png" />
        </a>
    </li>
</ul>
<p>数据中台适合采用分层的设计方式</p>
<ul>
<li>ODS 原始数据层</li>
<li>DWD 明细数据层</li>
<li>DWS 轻度汇总数据层</li>
<li>ADS/DM 应用数据层 / 数据集市层</li>
</ul>
<p>数据服务化，统一对外的接口</p>
<ul>
<li>屏蔽异构数据源</li>
<li>数据网关：要实现包括权限、监控、流控、日志在内的一系列管控能力</li>
<li>逻辑模型：从用户的视角出发，屏蔽底层的模型设计的实现，面向用户提供逻辑模型</li>
<li>性能和稳定性：由于数据服务侵入到用户的访问链路，所以对服务的可用性和性能都有很高的要求，数据服务必须是无状态的，可以做到横向扩展<br>

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/10/31/75oZus.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/10/31/75oZus.png" />
        </a>
    </li>
</ul>
<p>数据中台技术支撑</p>
<ul>
<li>最底层是 Hadoop，Spark、Flink等等</li>
<li>浅绿色部分是大数据平台范畴的工具，从数据集成、数据开发、数据测试、任务运维</li>
<li>灰色的部分，是数据中台的核心组成部分：数据治理模块</li>
<li>以元数据中心为基础，在统一了企业所有数据源的元数据基础上，提供了包括数据地图、数仓设计、数据质量、成本优化以及指标管理在内的 5 个产品</li>
<li>深绿色的部分是数据服务，它是数据中台的门户，对外提供了统一的数据服务</li>
<li>最上面是 面向不同场景的数据产品和应用

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/10/31/75odOa.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/10/31/75odOa.png" />
        </a>
    </li>
</ul>
<p>什么样的组织架构是适合数据中台建设</p>
<ul>
<li>数据产品部门：负责数据中台、数据产品的体系规划、产品设计、规范制定、应用效果跟进，指标口径的定义和维护（有的部门是由分析师管理）</li>
<li>数据平台部门：负责研发支撑数据中台构建的产品，例如指标系统、元数据中心、数据地图等</li>
<li>数据开发团队：负责维护数据中台的公共数据层，满足数据产品制定的数据需求</li>
<li>应用开发团队：负责开发数据应用产品，比如报表系统、电商中的供应链系统、高层看板、经营分析</li>
</ul>
<p>数据中台的下一站</p>
<ol>
<li>实时数据中台，实现批流一体。</li>
<li>云上数据中台，全面拥抱K8S，实现在线、离线混合部署，进一步提高资源利用率。</li>
<li>智能元数据管理+增强分析，降低数据分析的门槛，进一步释放数据智能</li>
<li>自动化代码构建，通过拖拉拽，自动化生成ETL代码的构建，进一步释放数据研发的效能，甚至让我们的非技术人员都可以完成简单的数据加工。</li>
<li>数据产品的时代，面向各种行业的数据产品全面涌现，并且和中台系统联动，比如基于指标的可分析维度，自动进行指标的业务诊断等等</li>
</ol>
<h2 id="实现">实现</h2>
<h3 id="元数据中心">元数据中心</h3>
<p>元数据划为三类：</p>
<ul>
<li>数据字典</li>
<li>数据血缘</li>
<li>数据特征</li>
</ul>
<p>下图</p>
<ul>
<li>dwd_trd_order_df 是一张订单交易明细数据</li>
<li>任务 flow_dws_trd_sku_1d 读取这张表，按照 sku 粒度，计算每日 sku 的交易金额和订单数量</li>
<li>输出轻度汇总表 dws_trd_sku_1d

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/10/31/75oei7.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/10/31/75oei7.png" />
        </a>
    </li>
</ul>
<p>数据字典描述的是数据的结构信息，我们以 dws_trd_sku_1d 为例

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/10/31/7A99lI.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/10/31/7A99lI.png" />
        </a>
    </p>
<p>数据血缘</p>
<ul>
<li>一个表是直接通过哪些表加工而来</li>
<li>dws_trd_sku_1d 是通过 dwd_trd_order_df 的数据计算而来</li>
<li>dwd_trd_order_df 是 dws_trd_sku_1d 的上游表</li>
</ul>
<p>数据特征主要是指数据的属性信息，以 dws_trd_sku_1d 为例

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/10/31/7A9kVV.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/10/31/7A9kVV.png" />
        </a>
    </p>
<p>元数据中心的产品</p>
<ul>
<li>开源的有 Netflix 的 Metacat、Apache Atlas</li>
<li>商业化的产品有 Cloudera Navigator</li>
<li>Metacat 采用：集成型设计，每个数据源只要实现一个连接实现类即可</li>
<li>Atlas，实时数据血缘采集：通过实时抓取正在执行的 SQL，解析执行计划，获取输入表和输出表</li>
</ul>
<p>Metacat架构

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/10/31/7A9BXL.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/10/31/7A9BXL.png" />
        </a>
    </p>
<p>Atlas 架构

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/10/31/7A9mTJ.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/10/31/7A9mTJ.png" />
        </a>
    </p>
<p>网易元数据中心设计</p>
<ol>
<li>多业务线、多租户支持</li>
<li>多数据源的支持</li>
<li>数据血缘，支持字段级血缘</li>
<li>与大数据平台集成</li>
<li>数据标签</li>
</ol>
<ul>
<li>指标可以作为一种类型的标签打在表上，主题域、分层信息都可以作为不同类型的标签关联到表</li>
</ul>
<p>网易的元数据中心</p>
<ul>
<li>数据血缘由采集端、消息中间件、消费端以及血缘清理模块组成</li>
<li>图数据库选择 Neo4J，没有高可用方案，并且不支持水平扩展，不过单机也够了</li>
<li>血缘还有一个清理的模块，主要负责定时清理过期的血缘，默认 7 天</li>
<li>数据字典部分，类似Metacat，直连数据源</li>
<li>对于 Kafka、HBase、Redis 等 KV，在内置的元数据中内置一个元数据管理模块，定期他们的schema信息</li>
<li>数据特征主要是标签的管理以及数据的访问热度信息</li>
<li>元数据中心统一对外提供了 API 访问接口</li>
<li>Ranger 可以基于元数据中心提供的 API 接口，获取标签对应的表，然后根据标签更新表对应的权限，实现基于标签的权限控制</li>
<li>数据地图：元数据中心的界面

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/10/31/7A9phG.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/10/31/7A9phG.png" />
        </a>
    </li>
</ul>
<p>总结

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/10/31/7A9LrB.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/10/31/7A9LrB.png" />
        </a>
    </p>
<h3 id="数据指标">数据指标</h3>
<p>指标混乱现状，常见指标问题</p>
<ol>
<li>相同指标名称，口径定义不同</li>
<li>相同口径，指标名称不一样</li>
<li>不同限定词，描述相同事实过程的两个指标，相同事实部分口径不一致</li>
</ol>
<ul>
<li>比如：黑卡会员购买用户数，计算周期内去重的，下单成功的</li>
<li>非会员的购买用户数，计算周期内去重的，非关单（购买成功取消订单）的用户</li>
<li>两者对非关单的包括不同，导致口径不同</li>
</ul>
<ol start="4">
<li>指标口径描述不清晰</li>
<li>指标口径描述错误</li>
<li>指标命名难于理解</li>
<li>指标数据来源和计算逻辑不清晰</li>
</ol>
<p>建设过程</p>
<ul>
<li>面向主题域管理</li>
<li>拆分原子指标和派生指标</li>
<li>还需要指标命名规范</li>
<li>关联的应用和可分析维度</li>
<li>分等级管理
<ul>
<li>一级指标：数据中台直接产出，核心指标（提供给公司高层看的）、原子指标以及跨部门的派生指标。</li>
<li>二级指标：基于中台提供的原子指标，业务部门创建的派生指标</li>
<li>一级指标，要确保指标按时、保证质量产出，指标创建由中台负责</li>
<li>二级指标，允许业务方自己创建，中台不承诺指标的产出时间和质量

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/02/7AkRP3.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/02/7AkRP3.png" />
        </a>
    </li>
</ul>
</li>
</ul>
<p>原子指标</p>
<ul>
<li>指标名称适合用“动作 + 度量”的命名方式（比如注册用户数、购买用户数），标识的命名用英文简写或者汉语拼音缩写比较好</li>
</ul>
<p>派生指标</p>
<ul>
<li>指标名称应该严格遵循“时间周期 + 统计粒度 + 修饰词 + 原子指标”的命名方式，标识命名要用“修饰词 _ 原子指标 _ 时间周期”的方式</li>
</ul>
<p>
        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/02/7AkY6j.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/02/7AkY6j.png" />
        </a>
    <br>

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/02/7AktN5.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/02/7AktN5.png" />
        </a>
    </p>
<p>基于指标系统构建全局的指标字典</p>
<ul>
<li>一个是面对一个新的指标需求，如何基于指标系统完成指标开发流程</li>
<li>另外一个是面对已经存在的，混乱的指标现状，如何进行全局梳理</li>
</ul>
<p>先来看第一个场景</p>
<ul>
<li>指标需求评审，需要需求方、数据开发、应用开发都参加。评审首先要确认这是不是一个新的指标，并明确它是原子指标还是派生指标。评审的目的就是要大家达成一致</li>
<li>评审的结果一种是不需要开发，是一个已经存在的指标;第二种就是需要开发</li>
<li>这个流程适用于一级指标，对于二级指标，可以不需要评审，当然开发也是由业务方开发和发布上线

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/02/7Ak6aa.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/02/7Ak6aa.png" />
        </a>
    </li>
</ul>
<p>第二个场景</p>
<ol>
<li>成立以数据产品或者分析师为核心的 1～3 人的工作小组，专门负责指标的全局梳理</li>
<li>制定指标梳理计划，明确指标梳理目标，覆盖多少个业务线，与业务方共同制定时间计划</li>
<li>对于每一个业务线，需要对还在使用的数据报表、数据产品进行盘点，这里顺便可以把没用的报表和数据产品应该下线</li>
<li>对于每一个报表和数据产品中涉及的指标，按照以下格式进行收集</li>
<li>对于收集的指标，明确业务口径，对于口径相同的，应该去除重复，关联的应用应该合并，此时以我的经验，可以过滤掉相当一部分</li>
<li>根据指标业务口径，明确指标所属的主题域、业务过程</li>
<li>区分指标类型，对于派生指标，要明确指标的统计粒度、修饰词、时间周期以及关联的原子指标</li>
<li>按照指标系统对指标的规范化定义，把整理好的指标录入指标系统</li>
</ol>
<p>
        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/02/7ATVjw.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/02/7ATVjw.png" />
        </a>
    </p>
<p>总结

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/02/7ATcm6.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/02/7ATcm6.png" />
        </a>
    </p>
<h3 id="数据模型复用">数据模型复用</h3>
<p>表1</p>
<ul>
<li>有 2547 张未识别分层的表，占总表 6049 的 40%，它们基本没办法复用</li>
<li>ODS：DWD：DWS：ADS 的读取任务分别是 1072：545：187：433，直接读取 ODS 层任务占这四层任务总和的 47.9%</li>
<li>说明有大量任务都是基于原始数据加工，中间模型复用性很差

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/02/7AT4G9.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/02/7AT4G9.png" />
        </a>
    </li>
</ul>
<p>表2</p>
<ul>
<li>在已识别的分层的查询中，ODS：DWD：DWS：ADS 的命中的查询分别是 892：1008：152：305</li>
<li>有 37.8% 的查询直接命中 ODS 层原始数据，说明 DWD、DWS、ADS 层数据建设缺失严重 

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/02/7ATCtY.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/02/7ATCtY.png" />
        </a>
    </li>
</ul>
<p>数据模型可复用，完善且规范</p>
<p>如何衡量完善度<br>
DWD 层完善度</p>
<ul>
<li>跨层引用率：ODS 层直接被 DWS/ADS/DM 层引用的表</li>
<li>占所有 ODS 层表（仅统计活跃表）比例</li>
<li>不允许出现跨层引用，ODS 层数据只能被 DWD 引用</li>
</ul>
<p>DWS/ADS/DM 层完善度</p>
<ul>
<li>汇总数据查询比例：DWS/ADS/DM 层的查询占所有查询的比例</li>
<li>汇总查询比例不可能做到 100%，但值越高，说明上层的数据建设越完善</li>
<li>一个比较差的模型设计，自下而上是一条线</li>
<li>而一个理想的模型设计，它应该是交织的发散型结构</li>
<li>模型引用系数：一个模型被读取，直接产出下游模型的平均数量</li>
<li>一般低于 2 比较差，3 以上相对比较好（经验值）

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/02/7ATJoH.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/02/7ATJoH.png" />
        </a>
    </li>
</ul>
<p>共享的数据中台建设</p>
<ol>
<li>接管 ODS 层，控制源头</li>
<li>划分主题域，构建总线矩阵</li>
<li>构建一致性维度</li>
</ol>
<ul>
<li>维度统一的最大的难题在于维度属性的整合</li>
<li>如果维度是商品，那么商品类别、商品品牌、商品尺寸等商品的属性，我们称为维度属性</li>
<li>公共维度属性与特有维度属性拆成两个维表</li>
<li>产出时间相差较大的维度属性拆分单独的维表</li>
<li>出于维表稳定性产出的考虑，你可以将更新频繁的和变化缓慢的进行拆分</li>
<li>维度表命名规范：<strong>DIM_ 主题域 _ 描述 _ 分表规则</strong></li>
<li>维度设计是维度建模的灵魂，也是数据中台模型设计的基础，维度设计的核心是构建一致性维度</li>
</ul>
<ol start="4">
<li>事实表整合</li>
</ol>
<ul>
<li>统计粒度必须保持一致，不同统计粒度的数据不能出现在同一个事实表中</li>
<li>对于 ODS 层直接被引用产出 DWS/ADS/DM 层的任务，通过血缘，找到任务清单，逐个进行拆解</li>
</ul>
<ol start="5">
<li>模型开发</li>
</ol>
<ul>
<li>所有任务都必须严格配置任务依赖</li>
<li>任务中创建的临时表，在任务结束前应该删除</li>
<li>任务名称最好跟表名一致，方便查找和关联</li>
<li>生命周期的管理，对于 ODS 和 DWD，一般尽可能保留所有历史数据，对于DWS/ADS/DM 需要设置生命周期，7～30 天不等</li>
<li>DWD 层表宜采用压缩的方式存储，可用 lzo 压缩</li>
</ul>
<ol start="6">
<li>应用迁移</li>
</ol>
<p>划分主题域

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/02/7ATjyZ.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/02/7ATjyZ.png" />
        </a>
    </p>
<p>构建 总线矩阵，明确每个主题域下的业务过程有哪些分析维度<br>

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/02/7ATnUU.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/02/7ATnUU.png" />
        </a>
    </p>
<p>维度表分表策略<br>

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/02/7ATfEs.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/02/7ATfEs.png" />
        </a>
    </p>
<p>总结

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/02/7ATica.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/02/7ATica.png" />
        </a>
    </p>
<h3 id="数据质量">数据质量</h3>
<p>一次典型的数据处理链路异常问题</p>
<ul>
<li>数据运营发现 ADS 层的一张表有问题</li>
<li>由于处理链路很长，开发排查了 3 小时才找到根源</li>
<li>原因是数据格式解析异常</li>
<li>修复问题，因为链路很长，重跑需要 5 小时

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/03/7ATsn7.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/03/7ATsn7.png" />
        </a>
    </li>
</ul>
<p>数据质量问题的根源</p>
<ul>
<li>业务源系统变更
<ul>
<li>首先是源系统数据库表结构变更</li>
<li>第二个是源系统环境变更，增加服务器，但是没配置同步任务</li>
<li>最后一个是源系统日志数据格式异常</li>
</ul>
</li>
<li>数据开发任务变更
<ul>
<li>占总体问题的 60%</li>
<li>任务发布上线，代码中引用的测试库没有修改为线上库，结果污染了线上数据</li>
<li>任务发布上线，代码中使用了固定分区，没有切换为“${azkaban.flow.1.days.ago}”，导致数据异常</li>
<li>数据格式处理错误，代码忽略了异常，导致数据错误</li>
<li>没有配置依赖，前一个任务没有运行完，后一个任务就开始运行，输入数据不完整，导致下游数据产出错误</li>
</ul>
</li>
<li>物理资源不足
<ul>
<li>多租户场景下，临时任务抢资源</li>
<li>开发写了很差劲的 SQL，多层嵌套，占用资源</li>
</ul>
</li>
<li>基础设施不稳定</li>
</ul>
<p>提高数据质量</p>
<ul>
<li>早发现，早恢复</li>
</ul>
<p>添加稽核校验任务</p>
<ul>
<li>在每个任务处理完后，添加稽核校验</li>
<li>根据任务是否重要，开启电话、邮件、短信报警，</li>
<li>完整性规则，检查表数据量是否有波动</li>
<li>准确性规则，格式是否正确，如 IP地址等</li>
<li>一致性规则，两个指标是否能推导出 第三个指标</li>
</ul>
<p>建立全链路监控</p>
<ul>
<li>基于数据血缘关系，建立全链路数据质量监控</li>
<li>通过智能预警，确保任务按时产出</li>
<li>通过应用的重要性区分数据等级，加快恢复速度</li>
<li>规范化管理制度

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/03/7AT6pI.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/03/7AT6pI.png" />
        </a>
    </li>
</ul>
<p>衡量数据质量</p>
<ul>
<li>4 点半前数据中台核心任务产出完成率</li>
<li>基于稽核规则，计算表级别的质量分数</li>
<li>需要立即介入的报警次数</li>
<li>SAL：每个数据产品上所有指标有没有在 9 点产出，超时的按时间计算不可用SLA，99.8% 是相对较好的SLA</li>
</ul>
<p>数据质量中心</p>
<ul>
<li>首页提供了：稽核规则的数量、表的覆盖量以及这些规则的执行通过情况</li>
<li>绿色节点代表数据正常</li>
<li>蓝色节点代表数据正在产出中</li>
<li>红色节点代表数据异常</li>
<li>灰色节点代表产出任务还未被调度到

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/03/7ATFGV.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/03/7ATFGV.png" />
        </a>
    </li>
</ul>
<p>总结<br>

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/03/7ATZzL.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/03/7ATZzL.png" />
        </a>
    </p>
<h3 id="成本治理">成本治理</h3>
<p>成本的陷阱</p>
<ol>
<li>数据上线容易下线难</li>
<li>低价值的数据应用消耗了大量的资源</li>
<li>烟囱式的开发模式</li>
<li>数据倾斜</li>
<li>数据未设置生命周期</li>
<li>调度周期不合理</li>
<li>任务参数配置</li>
<li>数据未压缩</li>
</ol>
<p>精细化成本管理的步骤<br>

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/03/7Am3G6.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/03/7Am3G6.png" />
        </a>
    </p>
<p>全局资产盘点</p>
<ul>
<li>计算全链路数据资产视图中，末端数据的成本和价值</li>
<li>如果一个表被多个下游应用复用，那这个表的存储资源成本以及产出任务消耗的成本，需要分摊给多个应用

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/03/7Am0Lw.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/03/7Am0Lw.png" />
        </a>
    </li>
</ul>
<p>计算价值</p>
<ul>
<li>末端是应用层表，看使用的人(根据人员等级加权重)，使用频率</li>
<li>特定场景的应用数据，看人群覆盖率，直接业务价值产出</li>
<li>轻度汇总，集市层，看使用范围和使用频率

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/03/7AmlzO.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/03/7AmlzO.png" />
        </a>
    </li>
</ul>
<p>发现问题</p>
<ul>
<li>持续产生成本，但是已经没有使用的末端数据（“没有使用”一般指 30 天内没有访问）；缺陷 1</li>
<li>数据应用价值很低，成本却很高，这些数据应用上游链路上的所有相关数据；缺陷 2</li>
<li>高峰期高消耗的数据；缺陷 4 - 8</li>
</ul>
<p>治理优化</p>
<ul>
<li>对于第一类问题，应该对表进行下线

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/03/7AmE9Q.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/03/7AmE9Q.png" />
        </a>
    </li>
<li>对第二类问题，需要按照应用粒度评估应用是否还有存在的必要</li>
<li>第三类问题，主要是针对高消耗的数据，又具体分为产出数据的任务高消耗和数据存储高消耗</li>
</ul>
<p>治理效果评估</p>
<ul>
<li>下线了多少任务和数据</li>
<li>这些任务每日消耗了多少资源</li>
<li>数据占用了多少存储空间</li>
</ul>
<p>假设：</p>
<ul>
<li>任务 A 运行时长 3 个小时，在运行过程中，共消耗 5384503 cpu*s</li>
<li>37007892 GB *s, 假设我们 1 个 CU （1 cpu， 4g memeory）一年是 1300 元成本</li>
<li>折合每天为 3.5 元（计算公式为 1300/365）</li>
</ul>
<p>总结<br>

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/03/7AmN1c.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/03/7AmN1c.png" />
        </a>
    </p>
<h3 id="数据服务">数据服务</h3>
<p>数据中台两个重要方法论</p>
<ul>
<li>OneData</li>
<li>OneService</li>
</ul>
<p>日常数据建设中存在的问题</p>
<ul>
<li>不知道数据被哪些应用访问</li>
<li>数据接入方式多样，接入效率低</li>
<li>数据和接口没办法共享</li>
<li>底层数据变更，影响数据应用</li>
</ul>
<p>数据服务应该具备的八大功能</p>
<ul>
<li>接口规范化定义，可以看成是取快递约定的收货码，基于统一的收货码取走快递</li>
<li>数据网关，可以看成是我们对每个货架前的队伍进行限流，确保每个队伍都能取走快递</li>
<li>链路关系的维护，可以看作是驿站会记录谁取走了什么快递</li>
<li>数据交付，可以看作驿站同时提供取快递和送货上门服务</li>
<li>提供多样中间存储，可以看成有不同类型的货架</li>
<li>逻辑模型，可以看成是一个工作人员，可以取多个货架的快递</li>
<li>API 接口，可以看作是驿站的不同货架的不同队伍导览</li>
<li>API 测试，可以看作是驿站工作人员上岗前的测试</li>
</ul>
<p>详细分析</p>
<ul>
<li>数据网关层面，可以做安全验证，ak、sk验证，并发控制，熔断、限流等</li>
<li>实时推送最新数据，业务层可以捕获 kafka 的消息</li>
<li>利用中间存储，加速数据查询</li>
<li>逻辑模型，实现数据的复用，一个 view 底层关联多个不同物理数据源</li>
<li>构建 API 集市，实现接口复用</li>
</ul>
<p>数据服务系统架构设计</p>
<ul>
<li>云原生</li>
<li>逻辑模型</li>
<li>数据自动导出

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/03/7Amh49.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/03/7Amh49.png" />
        </a>
    </li>
</ul>
<p>总结

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/03/7AmG9Y.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/03/7AmG9Y.png" />
        </a>
    

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/03/7Amgxh.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/03/7Amgxh.png" />
        </a>
    </p>
<h3 id="数据安全">数据安全</h3>
<p>安全的几个要点</p>
<ul>
<li>数据备份/恢复</li>
<li>精细化权限管理</li>
<li>生产、测试集群隔离</li>
<li>删除数据垃圾箱设计</li>
<li>操作审计</li>
</ul>
<p>数据备份与恢复</p>
<ul>
<li>基于 HDFS 快照 + DistCp + EC 实现的</li>
<li>DistCp 通过对比 快照数据，支持增量同步</li>
<li>冷备集群采用 5 副本，纠删码 存储原理，可以降低一半的存储空间，适合冷备

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/03/7AmA6U.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/03/7AmA6U.png" />
        </a>
    </li>
</ul>
<p>快照原理</p>
<ul>
<li>基于 S1 创建了一个快照，后面新增的文件，使用 diff 表示差异</li>
<li>通过 diff 就可以得到新增的数据，适合变化不大的场景

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/03/7AmxKH.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/03/7AmxKH.png" />
        </a>
    </li>
</ul>
<p>备份过程<br>

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/03/7Am51Z.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/03/7Am51Z.png" />
        </a>
    </p>
<p>备份内容</p>
<ul>
<li>任务的备份，要保存任务代码、任务的依赖关系、任务的调度配置以及任务的告警、稽核监控等信息</li>
<li>表的备份主要是备份表的创建语句</li>
<li>数据的备份策略应该和数据资产等级打通，对于核心数据资产，数据中台应该强制进行备份</li>
</ul>
<p>垃圾文件夹</p>
<ul>
<li>只对于命令行有效果</li>
<li>对于 SQL 或者 API操作的，需要修改客户端</li>
<li>将 rm 改为 mv 操作</li>
<li>垃圾箱保留 24 小时，然后会默认同步到 冷备集群

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/03/7AmWNq.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/03/7AmWNq.png" />
        </a>
    </li>
</ul>
<p>权限管理</p>
<ul>
<li>OpenLDAP + Kerberos + Ranger 实现的一体化用户、认证、权限管理体系</li>
</ul>
<p>OpenLDAP</p>
<ul>
<li>是一个轻量化的目录服务，数据以树型结构进行存储</li>
<li>能够提供高性能的查询服务，非常适合用户管理的场景</li>
<li>Hadoop 可以使用 LdapGroupsMappings 同步 LDAP 创建的用户和用户组</li>
<li>在 LDAP 中添加用户和组时，会自动同步到 Hadoop 集群内的所有机器上

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/03/7Amcvs.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/03/7Amcvs.png" />
        </a>
    </li>
</ul>
<p>认证机制</p>
<ul>
<li>采用 Kerberos</li>
</ul>
<p>权限控制</p>
<ul>
<li>Rnager 提供字段级别 细粒度控制</li>
</ul>
<p>操作审计机制</p>
<ul>
<li>Ranger 支持审计的功能</li>
<li>用户的访问记录会由部署在各个服务（HDFS，HBase 等等）上的插件推送到 Audit Server 上

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/03/7AmvIa.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/03/7AmvIa.png" />
        </a>
    </li>
</ul>
<p>开发和生产集群物理隔离</p>
<ul>
<li>传统企业，安全较高的，采用两套集群

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/03/7AmOxI.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/03/7AmOxI.png" />
        </a>
    </li>
<li>普通企业，兼顾安全和开发效率，共享meta-store，而集群环境隔离

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/03/7Am1kL.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/03/7Am1kL.png" />
        </a>
    </li>
</ul>
<p>总结<br>

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/03/7AmS4V.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/03/7AmS4V.png" />
        </a>
    </p>
<h2 id="实践">实践</h2>
<h3 id="构建企业应用">构建企业应用</h3>
<ul>
<li>初级阶段。一般企业的数据应用都是从数据报表开始的</li>
<li>发展阶段。一键执行，这个时候就要借助数据产品来实现</li>
<li>高级阶段。那么就要实现自助取数，让每个人都能基于数据去做分析和决策，实现普惠大数据</li>
</ul>
<p>赋能 BI 工具</p>
<ul>
<li>第一，统一报表指标业务口径</li>
<li>第二，掌握任务影响了哪些数据报表</li>
<li>第三，治理低价值的数据报表</li>
<li>第四，全维度钻取，比如天气导致打车业务增加，通过全维度找到天气</li>
</ul>
<p>打造零售行业精益数据运营体系</p>
<ul>
<li>找到业务问题、量化业务目标，比如，我们找到提高奶茶周转的关键，在于及时发现滞销奶茶品类，那么我们用动销率来衡量业务目标</li>
<li>然后要对业务目标持续监控，及时发现问题，比如，我们监控各个品类奶茶的销售情况，及时发现零动销奶茶</li>
<li>紧接着，要对问题进行诊断，比如，我们要发现奶茶滞销是因为口感太差</li>
<li>当然，还要根据原因形成决策，比如下线这款奶茶</li>
<li>最后付诸执行，比如通过一键，在所有门店菜单中去掉了该品类奶茶</li>
</ul>
<p>释放取数效能</p>
<ul>
<li>BI 部门一般有两项职责，一个是做报表，一个是取数</li>
<li>一年中做的报表可能就几百张，但是取数，一年可能要取几千次，或者上万次</li>
</ul>
<p>自助取数</p>
<ul>
<li>用图形化的方式，替代了写 SQL 的方式</li>
<li>提供了对业务人员比较友好的业务过程、指标、维度的概念，替换了表、字段</li>
<li>每个指标的业务口径都能够直接显示</li>
<li>用户通过选取一些指标和维度，添加一些筛选值，就可以完成取数过程</li>
<li>界面非常简洁，使用门槛非常低</li>
</ul>
<p>总结

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/04/7AmYFB.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/04/7AmYFB.png" />
        </a>
    </p>
<h3 id="数据研发流程">数据研发流程</h3>
<p>关注一个协作流程</p>
<ul>
<li>一个流程中涉及到了哪些环节</li>
<li>这些环节涉及到哪些角色参与</li>
<li>承载这个场景的工具产品是什么</li>
<li>这些环节之间是如何衔接的</li>
</ul>
<p>标准的数据研发流程包括四个阶段</p>
<ul>
<li>需求阶段</li>
<li>开发阶段</li>
<li>交付阶段</li>
<li>运维阶段</li>
<li>每个阶段中又涉及多个环节

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/04/7AmtNt.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/04/7AmtNt.png" />
        </a>
    </li>
</ul>
<p>需求阶段</p>
<ul>
<li>数据需求通常是以指标的形式出现的</li>
<li>分析师在制作新的报表，数据产品经理在策划新的数据产品时，会提一些新的指标需求</li>
<li>然后就会在指标系统登记指标（包括指标的业务口径、可分析维度、关联的应用、时间周期信息）</li>
<li>后面是等待评审，包括：</li>
<li>指标是新指标还是存在的指标；</li>
<li>如果是新指标，那么是原子指标还是派生指标</li>
<li>确认指标业务口径、计算逻辑和数据来源</li>
</ul>
<p>研发阶段</p>
<ul>
<li>利用数据地图发现已经存在的表，然后理解这些表中数据的准确含义</li>
<li>在模型设计过程中，要对模型中每个字段关联前面设计好的指标，以及可分析的维度</li>
<li>开发后找到对应主题域负责人审批</li>
<li>检查数据是否重复建设，复用性、完善度、规范性</li>
<li>模型变更增加字段，通过数据血缘通知所有依赖这个表的下游任务负责人</li>
</ul>
<p>数据开发</p>
<ul>
<li>清洗加工后，在数据开发中心开发数据ETL 任务，实时/离线</li>
<li>数据测试中心，验证数据</li>
<li>一个是进行数据探查，确定新加工的数据是否符合预期</li>
<li>另外一类是对原有模型的重构，新增字段或者更新部分字段</li>
<li>数据对比：不仅要验证新加工数据的正确性，还要确保原有未修改数据与修改前是否有改变</li>
<li>SQL静态代码检查，检查：使用了固定的分区，测试环境库，笛卡尔积等，扫码通过才能上线</li>
<li>配置稽核校验规则，主键唯一性监控，表行数波动值，以及一些业务规则监控</li>
</ul>
<p>发布</p>
<ul>
<li>申请配置参数是否合理，比如Spark Executor 的CPU和内存分配</li>
<li>任务依赖，报警是否正确，核心任务要有循环报警</li>
<li>检查稽核规则是否完备</li>
</ul>
<p>交付阶段</p>
<ul>
<li>数据开发不仅需要加工数据，还需要把数据发布成 API 接口或者其他服务形式</li>
<li>如读Hive 表写入到某个中间存储</li>
<li>数据开发可以基于中间存储发布 API 接口，定义输入和输出参数</li>
<li>最后，应用开发在数据服务上创建应用，然后申请对该接口的授权</li>
</ul>
<p>运维阶段</p>
<ul>
<li>在这个阶段的第一责任人是任务负责人（一般是这个任务对应的数据开发）</li>
<li>数据开发接到报警后，要第一时间认领报警</li>
<li>任务运维中心提供了报警认领的功能，数据开发点击认领，代表数据开发开始处理这个报警</li>
<li>如果报警迟迟没有人认领，任务运维中心会每隔 5 分钟会发起一次电话报警，直到报警认领</li>
<li>如果报警一直没有认领，系统会在 3 次报警，15 分钟后进行报警的上报，发送给模型所在域的负责人</li>
</ul>
<p>修复问题</p>
<ul>
<li>排查上游的任务稽核是否正确，输入数据是否异常</li>
<li>通过日志排查问题，确认后修复，重跑</li>
<li>发送“下游任务需要进行重跑”的通知</li>
<li>故障恢复完，还要进行复盘，其中重要的事情就是补充稽核规则，确保不再出现犯过的错误</li>
</ul>
<p>落地高效的数据分析流程</p>
<ul>
<li>第一步：发现业务问题，如某个季度销售额下降30%</li>
<li>第二步：理解数据
<ul>
<li>要分析的业务过程</li>
<li>这些业务过程中涉及到了哪些关键指标</li>
<li>这些指标的业务口径是什么</li>
<li>有哪些可以分析的维度</li>
</ul>
</li>
<li>第三步：探索式分析
<ul>
<li>如果现有的数据可以满足分析的需求，她可以直接在数据地图表详情页上发起数据权限的申请流程</li>
<li>如果现有的数据没办法满足需求，甄可爱就要对数据开发提出数据研发的需求，会稍显麻烦</li>
<li>需要开通相关权限</li>
</ul>
</li>
<li>第四步：可视化展现</li>
<li>第五步：分析过程产品化
<ul>
<li>将分析过程固化到数据产品中</li>
<li>研发了供应链决策协同系统，能够自动检测商品的库存和销售，智能生成补货建议，然后推送给采购系统</li>
</ul>
</li>
</ul>
<p>制订资产等级的标记规则</p>
<ul>
<li>一方面是数据本身涉及企业的核心机密，比如 KPI、产品日活、毛利等</li>
<li>另外一方面因素是根据数据应用的优先级，然后基于全链路的数据血缘制订数据的等级</li>
</ul>
<p>总结

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/04/7AmFM5.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/04/7AmFM5.png" />
        </a>
    <br>

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/04/7ApEA7.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/04/7ApEA7.png" />
        </a>
    </p>
<h3 id="中台建设">中台建设</h3>
<p>如果你要建中台，要做到这样几点：</p>
<ul>
<li>问问自己为什么要建中台，与业务达成一致的目标</li>
<li>把数据中台作为一个公司级别的顶级项目来推进，而不是一个数据部门自己的 KPI</li>
<li>数据中台必须要有清晰的、可量化的价值来衡量（从主观上也要得到业务部门的认可）</li>
</ul>
<p>立项数据中台项目</p>
<ul>
<li>如果能达成一个一致的、可量化的目标，数据中台的项目就成功了一半。</li>
<li>调研：当前数据使用过程中存在哪些痛点</li>
<li>调研：当前业务部门最关注的业绩目标</li>
<li>传统企业，更关注业绩目标（让企业达成KPI)</li>
</ul>
<p>几个问题</p>
<ul>
<li>第一，指标业务口径不一致</li>
<li>第二，需求响应速度慢</li>
<li>第三，取数效率低</li>
<li>第四，数据经常违反常识</li>
<li>第五，数据成本指数级增长</li>
</ul>
<p>数据中台部门考核 KPI，跟其他团队共背</p>
<ul>
<li>包含中台建设和业务支撑两部分</li>
<li>前者对应的是业务痛点，后者对应的是业务目标</li>
<li>从业务出发制订的这两部分内容，这是业务愿意和中台团队达成共建 KPI 的基础

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/04/7ApqBV.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/04/7ApqBV.png" />
        </a>
    </li>
</ul>
<p>推进数据中台项目落地</p>
<ul>
<li>第一步，调整团队组织架构，明确各个团队的职责
<ul>
<li>成立数据中台团队</li>
<li>原先三个小数仓独立的，先跟一个整合，其他两个基于中台的数据做加工</li>
<li>否则业务部门会认为在抢人，员工因为团队定位、福利等原因不愿意转部门</li>
</ul>
</li>
<li>第二步，数据整合
<ul>
<li>跟业务梳理各种指标，分解原子指标</li>
<li>对模型重构，整合，迁移，建设主题域</li>
<li>ODS必须由中台完全接管，但是压力会很大</li>
</ul>
</li>
<li>第三步，研发工具产品
<ul>
<li>跟基础团队合作，承担中台支撑技术产品研发</li>
<li>包括数据研发、数据治理、数据服务、数据分析应用、标签应用</li>
<li>正交化产品设计。每个产品聚焦一个应用场景，构建产品矩阵，简化了系统使用的复杂度</li>
<li>全链路打通，形成产品闭环。比如任务运维中心与有数报告打通，可以看到一个任务影响了哪些下游报表</li>
<li>组件式产品架构，允许业务根据场景搭配产品使用，形成面向不同场景的解决方案能力，例如数据质量解决方案、成本优化解决方案</li>
<li>轻型易用、降低用户门槛，尤其注重非技术人员的交互体验</li>
</ul>
</li>
<li>第四，数据产品构建</li>
</ul>
<p>总结数据中台项目成果</p>
<ul>
<li>快：研发交付时间大幅缩短、自助取数频率大幅度提高</li>
<li>准：100%数据产品指标业务口径一致；数据质量 bug 数量下降</li>
<li>省：优化高消耗任务，节省资源 40%</li>
</ul>
<p>EasyData 数据中台支撑技术工具列表

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/04/7ApugL.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/04/7ApugL.png" />
        </a>
    </p>
<p>数据用的好不好，主要看这样几点</p>
<ul>
<li>数据需求的交付时间到底有没有缩短；</li>
<li>还存不存在指标业务口径不一致的问题；</li>
<li>数据质量是否有显著的提升；数据成本是否增长变慢了</li>
<li>数据使用的成本到底有没有降低，只有真正降低了，才能让更多的人用</li>
</ul>
<p>数据解决了什么业务问题</p>
<ul>
<li>帮助零售行业解决了库存周转慢的问题</li>
<li>帮助物流行业提前发现了快递延迟的风险</li>
</ul>
<blockquote>
<p>数据中台和业务的关系，就是鱼和水的关系，谁也离不开谁<br>
业务想要获得更大的增长，就必须依赖数据中台，数据中台想要存活下去，就必须依赖业务的口碑和认可</p>
</blockquote>
<p>总结

        <a data-fancybox="gallery" href="https://v1.ax1x.com/2024/11/04/7ApwRJ.png">
            <img class="mx-auto" alt="" src="https://v1.ax1x.com/2024/11/04/7ApwRJ.png" />
        </a>
    </p>
<h2 id="参考">参考</h2>
<ul>
<li><a href="https://nos.netease.com/cloud-website-bucket/%E7%BD%91%E6%98%93%E6%95%B0%E6%8D%AE%E6%B2%BB%E7%90%86%E7%99%BD%E7%9A%AE%E4%B9%A68.0.pdf">网易数据治理白皮书</a></li>
<li><a href="https://sf.163.com/MaterialCenterArticle?productId=neteasecloud&amp;id=797541085933129728&amp;materialType=BLOG&amp;opener=https%3A%2F%2Fsf.163.com%2FMaterialCenter&amp;clue_button_position=NavListComponent&amp;clue_button_content=%E6%8A%80%E6%9C%AF%E4%B8%93%E5%AE%B6%E8%AF%B4%20%7C%20%E5%A6%82%E4%BD%95">如何基于 Spark 和 Z-Order 实现企业级离线数仓降本提效？</a></li>
<li><a href="https://www.enicn.com/uploadfile/down/%E7%BD%91%E6%98%93%E6%95%B0%E5%B8%86%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%9F%BA%E7%A1%80%E5%B9%B3%E5%8F%B0NDH%E5%AE%A3%E4%BC%A0%E6%89%8B%E5%86%8C-%E7%94%B5%E5%AD%90%E7%89%88%E5%88%A0%E5%87%8F.pdf">大数据基础平台NDH宣传手册</a></li>
</ul>

			<script type="text/javascript"
        async
        src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[\[','\]\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});

MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<style>
code.has-jax {
    font: inherit;
    font-size: 100%;
    background: inherit;
    border: inherit;
    color: #515151;
}
</style>
        </div>

        


        


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='/tags/%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%8F%B0'>数据中台</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "himichael/hugoblogtalks"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
</div>


                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://code0xff.org/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://code0xff.org/">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://code0xff.org/post/2025/01/spark_register_source/" title="Spark 注册数据源">Spark 注册数据源</a>
    </li>
    
    <li>
        <a href="https://code0xff.org/post/2025/01/spark_core_2/" title="Spark Core相关-2">Spark Core相关-2</a>
    </li>
    
    <li>
        <a href="https://code0xff.org/post/2024/12/llamafactory/" title="Llama Factory">Llama Factory</a>
    </li>
    
    <li>
        <a href="https://code0xff.org/post/2024/11/spark_core/" title="Spark Core相关-1">Spark Core相关-1</a>
    </li>
    
    <li>
        <a href="https://code0xff.org/post/2024/11/sae_tunnel/" title="sea tunnel">sea tunnel</a>
    </li>
    
    <li>
        <a href="https://code0xff.org/post/2024/11/k8s_networks/" title="k8s 网络">k8s 网络</a>
    </li>
    
    <li>
        <a href="https://code0xff.org/post/2024/11/ozone/" title="ozone">ozone</a>
    </li>
    
    <li>
        <a href="https://code0xff.org/post/2024/11/es/" title="ES的简单学习">ES的简单学习</a>
    </li>
    
    <li>
        <a href="https://code0xff.org/post/2025/02/ai/" title="AI的简单学习">AI的简单学习</a>
    </li>
    
    <li>
        <a href="https://code0xff.org/post/2024/11/big_data_investigation/" title="国内几个云厂商大数据平台">国内几个云厂商大数据平台</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href='/categories/'>分类</a></h3>
<ul class="widget-list">
    
    <li><a href="https://code0xff.org/categories/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式 (6)</a></li>
    
    <li><a href="https://code0xff.org/categories/%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/">原理分析 (24)</a></li>
    
    <li><a href="https://code0xff.org/categories/%E5%95%86%E4%B8%9A/">商业 (3)</a></li>
    
    <li><a href="https://code0xff.org/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据 (56)</a></li>
    
    <li><a href="https://code0xff.org/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库 (41)</a></li>
    
    <li><a href="https://code0xff.org/categories/%E6%96%87%E5%AD%A6%E5%92%8C%E8%89%BA%E6%9C%AF/">文学和艺术 (3)</a></li>
    
    <li><a href="https://code0xff.org/categories/%E6%97%85%E8%A1%8C/">旅行 (12)</a></li>
    
    <li><a href="https://code0xff.org/categories/%E6%9E%B6%E6%9E%84/">架构 (13)</a></li>
    
    <li><a href="https://code0xff.org/categories/%E7%AE%97%E6%B3%95/">算法 (8)</a></li>
    
    <li><a href="https://code0xff.org/categories/%E7%B3%BB%E7%BB%9F/">系统 (7)</a></li>
    
    <li><a href="https://code0xff.org/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言 (7)</a></li>
    
    <li><a href="https://code0xff.org/categories/%E8%A1%8C%E4%B8%9A%E8%A7%82%E5%AF%9F/">行业观察 (3)</a></li>
    
    <li><a href="https://code0xff.org/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">读书笔记 (14)</a></li>
    
    <li><a href="https://code0xff.org/categories/%E9%9A%8F%E4%BE%BF%E5%86%99%E5%86%99/">随便写写 (3)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title">归档</a></h3>
<ul class="widget-list">
    
    <li><a href="https://code0xff.org/years/2021%E5%B9%B4/">2021年 (41)</a></li>
    
    <li><a href="https://code0xff.org/years/2022%E5%B9%B4/">2022年 (55)</a></li>
    
    <li><a href="https://code0xff.org/years/2023%E5%B9%B4/">2023年 (54)</a></li>
    
    <li><a href="https://code0xff.org/years/2024%E5%B9%B4/">2024年 (48)</a></li>
    
    <li><a href="https://code0xff.org/years/2025%E5%B9%B4/">2025年 (2)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href='/tags/'>标签</a></h3>
<div class="tagcloud">
    
    <a href="https://code0xff.org/tags/ai/">AI </a>
    
    <a href="https://code0xff.org/tags/ambari/">Ambari </a>
    
    <a href="https://code0xff.org/tags/architecture/">architecture </a>
    
    <a href="https://code0xff.org/tags/bigdata/">bigdata </a>
    
    <a href="https://code0xff.org/tags/b%E6%A0%91/">B树 </a>
    
    <a href="https://code0xff.org/tags/c&#43;&#43;/">C&#43;&#43; </a>
    
    <a href="https://code0xff.org/tags/calcite/">calcite </a>
    
    <a href="https://code0xff.org/tags/cmu-database/">CMU-Database </a>
    
    <a href="https://code0xff.org/tags/data_ingestion/">Data_Ingestion </a>
    
    <a href="https://code0xff.org/tags/deltalake/">DeltaLake </a>
    
    <a href="https://code0xff.org/tags/doris/">Doris </a>
    
    <a href="https://code0xff.org/tags/english/">English </a>
    
    <a href="https://code0xff.org/tags/es/">ES </a>
    
    <a href="https://code0xff.org/tags/facebook/">Facebook </a>
    
    <a href="https://code0xff.org/tags/flink/">flink </a>
    
    <a href="https://code0xff.org/tags/flume/">flume </a>
    
    <a href="https://code0xff.org/tags/gc/">GC </a>
    
    <a href="https://code0xff.org/tags/gluten/">Gluten </a>
    
    <a href="https://code0xff.org/tags/hana/">HANA </a>
    
    <a href="https://code0xff.org/tags/hive/">Hive </a>
    
    <a href="https://code0xff.org/tags/iceberg/">iceberg </a>
    
    <a href="https://code0xff.org/tags/impala/">Impala </a>
    
    <a href="https://code0xff.org/tags/janino/">janino </a>
    
    <a href="https://code0xff.org/tags/k8s/">k8s </a>
    
    <a href="https://code0xff.org/tags/kafka/">Kafka </a>
    
    <a href="https://code0xff.org/tags/kudu/">kudu </a>
    
    <a href="https://code0xff.org/tags/kyuubi/">Kyuubi </a>
    
    <a href="https://code0xff.org/tags/lakehouse/">Lakehouse </a>
    
    <a href="https://code0xff.org/tags/leveldb/">LevelDB </a>
    
    <a href="https://code0xff.org/tags/llamafactory/">LlamaFactory </a>
    
    <a href="https://code0xff.org/tags/llvm/">LLVM </a>
    
    <a href="https://code0xff.org/tags/manacher/">Manacher </a>
    
    <a href="https://code0xff.org/tags/mapreduce/">MapReduce </a>
    
    <a href="https://code0xff.org/tags/micro-service/">micro-service </a>
    
    <a href="https://code0xff.org/tags/mysql/">MySQL </a>
    
    <a href="https://code0xff.org/tags/newsql/">NewSQL </a>
    
    <a href="https://code0xff.org/tags/oceanbase/">OceanBase </a>
    
    <a href="https://code0xff.org/tags/openlogreplicator/">OpenLogReplicator </a>
    
    <a href="https://code0xff.org/tags/parquet/">parquet </a>
    
    <a href="https://code0xff.org/tags/paxos/">paxos </a>
    
    <a href="https://code0xff.org/tags/presto/">Presto </a>
    
    <a href="https://code0xff.org/tags/quick-sql/">quick-sql </a>
    
    <a href="https://code0xff.org/tags/raft/">raft </a>
    
    <a href="https://code0xff.org/tags/scala/">scala </a>
    
    <a href="https://code0xff.org/tags/simd/">SIMD </a>
    
    <a href="https://code0xff.org/tags/snowflake/">snowflake </a>
    
    <a href="https://code0xff.org/tags/spark/">spark </a>
    
    <a href="https://code0xff.org/tags/sre/">SRE </a>
    
    <a href="https://code0xff.org/tags/teradata/">TeraData </a>
    
    <a href="https://code0xff.org/tags/tpcx-hs/">TPCx-HS </a>
    
    <a href="https://code0xff.org/tags/trino/">Trino </a>
    
    <a href="https://code0xff.org/tags/tuning/">Tuning </a>
    
    <a href="https://code0xff.org/tags/unix/">unix </a>
    
    <a href="https://code0xff.org/tags/yarn/">YARN </a>
    
    <a href="https://code0xff.org/tags/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/">二分查找 </a>
    
    <a href="https://code0xff.org/tags/%E4%BA%8C%E5%8F%89%E6%A0%91%E9%81%8D%E5%8E%86/">二叉树遍历 </a>
    
    <a href="https://code0xff.org/tags/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式 </a>
    
    <a href="https://code0xff.org/tags/%E5%88%97%E5%AD%98/">列存 </a>
    
    <a href="https://code0xff.org/tags/%E5%8A%A8%E6%80%81%E6%B3%A8%E5%85%A5/">动态注入 </a>
    
    <a href="https://code0xff.org/tags/%E5%8E%86%E5%8F%B2/">历史 </a>
    
    <a href="https://code0xff.org/tags/%E5%90%91%E9%87%8F%E5%8C%96/">向量化 </a>
    
    <a href="https://code0xff.org/tags/%E5%9B%9E%E6%BA%AF/">回溯 </a>
    
    <a href="https://code0xff.org/tags/%E5%9B%BD%E5%86%85%E6%97%85%E8%A1%8C/">国内旅行 </a>
    
    <a href="https://code0xff.org/tags/%E5%9B%BD%E5%A4%96%E6%97%85%E8%A1%8C/">国外旅行 </a>
    
    <a href="https://code0xff.org/tags/%E5%A4%9A%E7%A7%9F%E6%88%B7/">多租户 </a>
    
    <a href="https://code0xff.org/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据 </a>
    
    <a href="https://code0xff.org/tags/%E5%AD%98%E5%82%A8/">存储 </a>
    
    <a href="https://code0xff.org/tags/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/">工作记录 </a>
    
    <a href="https://code0xff.org/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/">微服务 </a>
    
    <a href="https://code0xff.org/tags/%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%8F%B0/">数据中台 </a>
    
    <a href="https://code0xff.org/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库 </a>
    
    <a href="https://code0xff.org/tags/%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/">数据模型 </a>
    
    <a href="https://code0xff.org/tags/%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB/">数据迁移 </a>
    
    <a href="https://code0xff.org/tags/%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96/">查询优化 </a>
    
    <a href="https://code0xff.org/tags/%E6%9F%A5%E8%AF%A2%E7%BC%96%E8%AF%91/">查询编译 </a>
    
    <a href="https://code0xff.org/tags/%E6%A6%82%E7%8E%87/">概率 </a>
    
    <a href="https://code0xff.org/tags/%E6%B1%87%E7%BC%96/">汇编 </a>
    
    <a href="https://code0xff.org/tags/%E6%B5%8B%E8%AF%95/">测试 </a>
    
    <a href="https://code0xff.org/tags/%E7%94%9F%E6%B4%BB/">生活 </a>
    
    <a href="https://code0xff.org/tags/%E7%94%B5%E5%BD%B1/">电影 </a>
    
    <a href="https://code0xff.org/tags/%E7%AE%97%E6%B3%95/">算法 </a>
    
    <a href="https://code0xff.org/tags/%E7%B4%A2%E5%BC%95/">索引 </a>
    
    <a href="https://code0xff.org/tags/%E7%BB%8F%E6%B5%8E/">经济 </a>
    
    <a href="https://code0xff.org/tags/%E7%BC%93%E5%AD%98/">缓存 </a>
    
    <a href="https://code0xff.org/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/">编译原理 </a>
    
    <a href="https://code0xff.org/tags/%E7%BD%91%E7%BB%9C/">网络 </a>
    
    <a href="https://code0xff.org/tags/%E8%AE%A1%E7%AE%97%E6%A1%86%E6%9E%B6/">计算框架 </a>
    
    <a href="https://code0xff.org/tags/%E8%AE%BA%E6%96%87/">论文 </a>
    
    <a href="https://code0xff.org/tags/%E8%AF%BB%E4%B9%A6/">读书 </a>
    
    <a href="https://code0xff.org/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">读书笔记 </a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">RSS</h3>
        <ul class="widget-list">
            <li><a href="https://code0xff.org/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
    <footer id="footer">
    <div>
        &copy; 2025 <a href="https://code0xff.org/">记录每个瞬间 By 老王</a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script><script src="https://cdn.bootcdn.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'GA ID', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




</body>

</html>